#include <iostream>
#include <stdlib.h>
#include <Windows.h>
#include <string>
using namespace std;

#define A(x) (x - 0x400000 + (DWORD)GetModuleHandleA(0))

typedef int(__cdecl * singletonprint)(int, const char *, ...);
singletonprint printerf = (singletonprint)(A(0x519e80));



BOOL WINAPI CONSOLEBYPASS()
{
	DWORD nOldProtect;
	if (!VirtualProtect(FreeConsole, 1, PAGE_EXECUTE_READWRITE, &nOldProtect))
		return FALSE;
	*(BYTE*)(FreeConsole) = 0xC3;
	if (!VirtualProtect(FreeConsole, 1, nOldProtect, &nOldProtect))
		return FALSE;
	AllocConsole();
}

void maininit()
{
	CONSOLEBYPASS();
	auto Hold1 = freopen("CONOUT$", "w", stdout);
	auto Hold2 = freopen("CONIN$", "r", stdin);
	HWND ConsoleHandle = GetConsoleWindow();
	SetWindowPos(ConsoleHandle, HWND_TOPMOST, 50, 20, 0, 0, SWP_DRAWFRAME | SWP_NOMOVE | SWP_NOSIZE | SWP_SHOWWINDOW);
	ShowWindow(ConsoleHandle, 1);
	SetConsoleTitle("PrintExploit");
	printf("Best Boi print exploit lol \n");

	while (true) {
		std::string yeet;
		std::getline(std::cin, yeet);
		printerf(0, yeet.c_str());
		
	}




}

BOOL APIENTRY DllMain(HMODULE Module, DWORD Reason, void* Reserved)
{
	switch (Reason)
	{
	case DLL_PROCESS_ATTACH:
		DisableThreadLibraryCalls(Module);
		CreateThread(NULL, NULL, (LPTHREAD_START_ROUTINE)maininit, NULL, NULL, NULL);
		break;
	case DLL_PROCESS_DETACH:
		exit(0); // exits roblox when the dll is unloaded.
	 
		break;
	default: break;
	}

	return TRUE;
}
